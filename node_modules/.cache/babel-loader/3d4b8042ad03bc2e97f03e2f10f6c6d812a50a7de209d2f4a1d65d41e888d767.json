{"ast":null,"code":"import axios from \"axios\";\nimport to from \"await-to-js\";\nconst finnhub = require('finnhub');\nconst api_key = finnhub.ApiClient.instance.authentications['api_key'];\napi_key.apiKey = \"ceo33oiad3icu1038ab0ceo33oiad3icu1038abg\";\nconst finnhubClient = new finnhub.DefaultApi();\nexport async function fetchSymbols() {\n  var _res$data;\n  const [err, res] = await to(axios.get(finnhubClient.stockSymbols(\"US\", (error, data, response) => {\n    console.log(data);\n  })));\n  if (err) return;\n  return (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.data;\n}\nexport async function fetchKLine(symbol, period) {\n  var _res$data2;\n  let size = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2000;\n  const [err, res] = await to(axios.get(finnhubClient.stockCandles(\"AAPL\", \"D\", 1590988249, 1591852249, function (error, data) {\n    console.log(data);\n  })));\n  if (err) return;\n  return (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.data;\n}","map":{"version":3,"names":["axios","to","finnhub","require","api_key","ApiClient","instance","authentications","apiKey","finnhubClient","DefaultApi","fetchSymbols","err","res","get","stockSymbols","error","data","response","console","log","fetchKLine","symbol","period","size","stockCandles"],"sources":["/home/jeff/project1/tv/src/services/index.ts"],"sourcesContent":["import axios from \"axios\";\nimport to from \"await-to-js\";\nconst finnhub = require('finnhub');\n\nconst api_key = finnhub.ApiClient.instance.authentications['api_key'];\napi_key.apiKey = \"ceo33oiad3icu1038ab0ceo33oiad3icu1038abg\"\nconst finnhubClient = new finnhub.DefaultApi()\n\nexport interface IApiSymbol {\n  \"amount-precision\": number;\n  \"api-trading\": string;\n  \"base-currency\": string;\n  \"buy-market-max-order-value\": number;\n  \"leverage-ratio\": number;\n  \"limit-order-max-order-amt\": number;\n  \"limit-order-min-order-amt\": number;\n  \"max-order-amt\": number;\n  \"min-order-amt\": number;\n  \"min-order-value\": number;\n  \"price-precision\": number;\n  \"quote-currency\": string;\n  \"sell-market-max-order-amt\": number;\n  \"sell-market-min-order-amt\": number;\n  state: string;\n  \"super-margin-leverage-ratio\": number;\n  symbol: string;\n  \"symbol-partition\": string;\n  \"value-precision\": number;\n}\n\nexport interface IApiKLine {\n  id: number; //\t调整为新加坡时间的时间戳，单位秒，并以此作为此K线柱的id\n  amount: number; // \t以基础币种计量的交易量\n  count: number; //\t交易次数\n  open: number; //\t本阶段开盘价\n  close: number; // 本阶段收盘价\n  low: number; //\t本阶段最低价\n  high: number; //\t本阶段最高价\n  vol: number; //\t以报价币种计量的交易量\n}\n\nexport async function fetchSymbols() {\n  const [err, res] = await to(\n    axios.get<{ data: IApiSymbol[] }>(finnhubClient.stockSymbols(\"US\", (error, data, response) => {\n      console.log(data)\n    }))\n  );\n  if (err) return;\n  return res.data?.data;\n}\n\nexport async function fetchKLine(symbol: string, period: string, size = 2000) {\n  const [err, res] = await to(\n    axios.get<{ data: IApiKLine[] }>(finnhubClient.stockCandles(\"AAPL\", \"D\", 1590988249, 1591852249, function (error: any, data: any): void {\n        console.log(data);\n      }))\n    );\n  if (err) return;\n  return res.data?.data;\n}\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,EAAE,MAAM,aAAa;AAC5B,MAAMC,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAElC,MAAMC,OAAO,GAAGF,OAAO,CAACG,SAAS,CAACC,QAAQ,CAACC,eAAe,CAAC,SAAS,CAAC;AACrEH,OAAO,CAACI,MAAM,GAAG,0CAA0C;AAC3D,MAAMC,aAAa,GAAG,IAAIP,OAAO,CAACQ,UAAU,EAAE;AAmC9C,OAAO,eAAeC,YAAY,GAAG;EAAA;EACnC,MAAM,CAACC,GAAG,EAAEC,GAAG,CAAC,GAAG,MAAMZ,EAAE,CACzBD,KAAK,CAACc,GAAG,CAAyBL,aAAa,CAACM,YAAY,CAAC,IAAI,EAAE,CAACC,KAAK,EAAEC,IAAI,EAAEC,QAAQ,KAAK;IAC5FC,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC;EACnB,CAAC,CAAC,CAAC,CACJ;EACD,IAAIL,GAAG,EAAE;EACT,oBAAOC,GAAG,CAACI,IAAI,8CAAR,UAAUA,IAAI;AACvB;AAEA,OAAO,eAAeI,UAAU,CAACC,MAAc,EAAEC,MAAc,EAAe;EAAA;EAAA,IAAbC,IAAI,uEAAG,IAAI;EAC1E,MAAM,CAACZ,GAAG,EAAEC,GAAG,CAAC,GAAG,MAAMZ,EAAE,CACzBD,KAAK,CAACc,GAAG,CAAwBL,aAAa,CAACgB,YAAY,CAAC,MAAM,EAAE,GAAG,EAAE,UAAU,EAAE,UAAU,EAAE,UAAUT,KAAU,EAAEC,IAAS,EAAQ;IACpIE,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC;EACnB,CAAC,CAAC,CAAC,CACJ;EACH,IAAIL,GAAG,EAAE;EACT,qBAAOC,GAAG,CAACI,IAAI,+CAAR,WAAUA,IAAI;AACvB"},"metadata":{},"sourceType":"module","externalDependencies":[]}